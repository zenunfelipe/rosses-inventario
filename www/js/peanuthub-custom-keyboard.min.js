/*------------------------------------------------------
 Company:           Peanut Hub Ltda.
 Author:            Peanut Hub Ltda. <contacto@peanuthub.cl> (http://www.peanuthub.cl)
 
 Description:       Unobstrive Ionic Custom Keyboard for Ionic 1
 Github:            https://bitbucket.org/peanuthub/peanuthub-custom-keyboard

 Versi√≥n:           1.0.2
 Build Date:        2017-01-06 21:34:41
------------------------------------------------------*/


angular.module("peanuthub-custom-keyboard.templates",[]).run(["$templateCache",function($templateCache){"use strict";$templateCache.put("peanuthub-custom-keyboard/peanuthub-custom-keyboard.tpl.html",'<custom-keyboard-container class={{model.theme}}><custom-backdrop></custom-backdrop><custom-keyboard><custom-keyboard-addons></custom-keyboard-addons><custom-keyboard-header ng-show=!model.hideHeader><custom-keyboard-button ion-ripple ion-native-click ng-click=onDonePressed($event)>{{model.doneText}}</custom-keyboard-button></custom-keyboard-header><custom-keyboard-keys><custom-keyboard-key ion-native-click ion-ripple ng-click=onKeyPressed($event,key) ng-repeat="key in model.keys"><div><div class=key-value ng-if=key.value>{{key.value}}</div><div class=key-icon ng-if=key.icon><i class="icon {{key.icon}}"></i></div><div class=key-label>{{key.label}}</div></div></custom-keyboard-key></custom-keyboard-keys></custom-keyboard></custom-keyboard-container>')}]),angular.module("peanuthub-custom-keyboard.components",[]),angular.module("peanuthub-custom-keyboard.services",[]),angular.module("peanuthub-custom-keyboard",["peanuthub-custom-keyboard.templates","peanuthub-custom-keyboard.services","peanuthub-custom-keyboard.components"]),angular.module("peanuthub-custom-keyboard.components").directive("ionNativeClick",function(){return{restrict:"A",controller:["$scope","$element",function(){}],link:function(scope,element){element.on("click",function(){ionic.Platform.isWebView()&&"undefined"!=typeof nativeclick&&nativeclick.trigger()})}}}),angular.module("peanuthub-custom-keyboard.components").directive("ionRipple",["$q","$templateRequest","$log","$compile","$timeout","$rootScope",function(){return{restrict:"A",scope:{ionRippleColor:"@"},link:function(scope,element,attr){function deactivateRipple(){ripple.classList.remove(animateClassName)}function rippleHandler(event){function getPos(element){var de=document.documentElement,box=element.getBoundingClientRect(),top=box.top+pageYOffset-de.clientTop,left=box.left+pageXOffset-de.clientLeft;return{top:top,left:left}}ripple.offsetHeight||ripple.offsetWidth||(size=Math.max(element[0].offsetWidth,element[0].offsetHeight),ripple.style.width=ripple.style.height=size+"px"),x=event.pageX,y=event.pageY,offsets=getPos(element[0]),ripple.style.top=y-offsets.top-size/2+"px",ripple.style.left=x-offsets.left-size/2+"px",ripple.classList.add(animateClassName)}var x,y,size,offsets,rippleClass="ion-ripple",animateClassName="ion-ripple_animate",ripple=document.createElement("span");attr.ionRippleColor&&(ripple.style.backgroundColor=attr.ionRippleColor),ripple.classList.add(rippleClass),element[0].insertBefore(ripple,element[0].firstChild),element.on("click",rippleHandler),angular.element(ripple).on("animationend webkitAnimationEnd",deactivateRipple),scope.$on("$destroy",function(){element.off("click",rippleHandler),angular.element(ripple).off("animationend webkitAnimationEnd",deactivateRipple)})}}}]),function(){var buildCustomKeyBoard=function(keyboard){return function($q,$templateRequest,$log,$compile,$timeout,$rootScope,$peanuthubCustomKeyboard){return{restrict:"A",scope:{keyboardOptions:"=",keyboardOnKeypress:"&",keyboardOnDoneKeypress:"&",keyboardOnShow:"&",keyboardOnHide:"&"},transclude:!1,controller:function(){},link:function(scope,element,attributes){var templateUrl="peanuthub-custom-keyboard/peanuthub-custom-keyboard.tpl.html",body=angular.element(document.body),input_element=element,model={animation:{duration:350,slideUp:"slide-up",slideDown:"slide-down"},doneText:"Aceptar",keys:keyboard&&keyboard.keys||null,addons:keyboard&&keyboard.addons||null,theme:""};!function(options){if(options.doneText&&(model.doneText=options.doneText.toString()),(options.cleanTextOnClick||!angular.isUndefined(attributes.cleanTextOnClick))&&(model.cleanTextOnClick=!0),options.theme&&(model.theme=options.theme.toString()),options.enableWAI&&(model.theme+=" wai-enabled"),options.hideHeader&&(model.hideHeader=!0),!model.keys){var keyboards=$peanuthubCustomKeyboard.getKeyboards();if(!options.keyboard||options.keyboard&&!keyboards[options.keyboard])throw Error("KEYBOARD_TEMPLATE_NOT_INITIALIZED");var configuredKeyboard=keyboards[options.keyboard];model.keys=configuredKeyboard.keys,configuredKeyboard&&configuredKeyboard.addons&&(model.addons=configuredKeyboard.addons)}}(scope.keyboardOptions||{}),scope.model=model;var destroy=function(container){var defer=$q.defer(),keyboard=container.find("custom-keyboard");keyboard.addClass(model.animation.slideDown);var delay=$timeout(function(){$timeout.cancel(delay),input_element.val(input_element.val()),input_element.triggerHandler("change"),input_element.attr("readonly",!0),defer.resolve();var delegate=scope.keyboardOnHide();delegate&&delegate(input_element.val())},model.animation.duration);return input_element.removeAttr("readonly"),defer.promise.then(function(){var clonedScope=container.scope();if(container.remove(),clonedScope)try{clonedScope.$destroy()}catch(ex){}_firstKeyPressed=!0}),defer.promise},_firstKeyPressed=!0;scope.onKeyPressed=function(ev,item){switch(item.type){case"CHAR_KEY":_firstKeyPressed&&model.cleanTextOnClick&&input_element.val(""),_firstKeyPressed=!1,input_element.val(input_element.val()+item.value);break;case"DELETE_KEY":if(_firstKeyPressed)input_element.val("");else{var str=input_element.val();str=str.substring(0,str.length-1),input_element.val(str)}break;case"DONE_KEY":var done_handler=scope.keyboardOnDoneKeypress();if(done_handler)try{done_handler(input_element.val())}catch(ex){}}var delegate=scope.keyboardOnKeypress();delegate&&delegate(item,input_element.val())},scope.onDonePressed=function(ev){var item={type:"DONE_KEY",value:model.doneText};scope.onKeyPressed(ev,item)};var initialize=function(container){var keyboard=container.find("custom-keyboard"),backdrop=container.find("custom-backdrop"),doneKey=container.find("custom-keyboard-button");backdrop.on("click",function(){destroy(container)}),doneKey.on("click",function(){destroy(container)}),keyboard.addClass(model.animation.slideUp);var delay=$timeout(function(){$timeout.cancel(delay),keyboard.removeClass(model.animation.slideUp);var delegate=scope.keyboardOnShow();delegate&&delegate(input_element.val());var api={sendKeys:function(text){scope.onKeyPressed({},{type:"CHAR_KEY",value:text})},hide:function(){destroy(container)},done:function(){destroy(container).then(function(){scope.onDonePressed({})})}};scope.$broadcast("custom-keyboard-initialize",api)},model.animation.duration)},last_container=null;$rootScope.$on("$ionicView.beforeEnter",function(){last_container&&(destroy(last_container),last_container=null)}),input_element.attr("readonly",!0),input_element.on("click",function(){$templateRequest(templateUrl).then(function(html){var template=angular.element(html),addons=template.find("custom-keyboard-addons");model.addons&&angular.forEach(model.addons,function(addon){var elm=angular.element("<"+addon.directive+"/>");if(addon.parameters)for(var name in addon.parameters)elm.attr(name,addon.parameters[name]);addons.append(elm)}),body.append(template);var newChildScope=scope.$new();$compile(template)(newChildScope),last_container=template,initialize(template)}),model.cleanTextOnClick&&input_element.val("")})}}}};angular.module("peanuthub-custom-keyboard.components").directive("peanuthubCustomKeyboard",buildCustomKeyBoard()).directive("peanuthubNumericKeyboard",buildCustomKeyBoard({name:"NUMERIC",keys:[{type:"CHAR_KEY",value:"1"},{type:"CHAR_KEY",value:"2",label:"ABC"},{type:"CHAR_KEY",value:"3",label:"DEF"},{type:"CHAR_KEY",value:"4",label:"GHI"},{type:"CHAR_KEY",value:"5",label:"JKL"},{type:"CHAR_KEY",value:"6",label:"MNO"},{type:"CHAR_KEY",value:"7",label:"PQRS"},{type:"CHAR_KEY",value:"8",label:"TUV"},{type:"CHAR_KEY",value:"9",label:"WXYZ"},{type:"DUMMY_KEY",value:""},{type:"CHAR_KEY",value:"0"},{type:"DELETE_KEY",icon:"ion-backspace-outline"}]}))}(),angular.module("peanuthub-custom-keyboard.services").provider("$peanuthubCustomKeyboard",function(){var _customKeyboards={};this.addCustomKeyboard=function(keyboardName,configuration){_customKeyboards[keyboardName]=configuration},this.$get=["$q","$log",function(){var self={};return self.getKeyboards=function(){if(!_customKeyboards)throw Error("KEYBOARDS_NOT_INITIALIZED");return _customKeyboards},self}]});
//# sourceMappingURL=peanuthub-custom-keyboard.min.js.map